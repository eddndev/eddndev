---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/layout/Footer.astro';
import { services } from '../data/services';

const colorMap: Record<string, {
  dot: string; text: string; num: string; heading: string;
  highlight: string; stroke: string; ctaHover: string;
}> = {
  purple: {
    dot: 'bg-purple-500',
    text: 'text-purple-400',
    num: 'text-purple-400',
    heading: 'text-purple-400',
    highlight: 'bg-purple-500',
    stroke: 'rgba(168,85,247,0.12)',
    ctaHover: 'hover:text-purple-300',
  },
  green: {
    dot: 'bg-green-500',
    text: 'text-green-400',
    num: 'text-green-400',
    heading: 'text-green-400',
    highlight: 'bg-green-500',
    stroke: 'rgba(34,197,94,0.12)',
    ctaHover: 'hover:text-green-300',
  },
  orange: {
    dot: 'bg-orange-500',
    text: 'text-orange-400',
    num: 'text-orange-400',
    heading: 'text-orange-400',
    highlight: 'bg-orange-500',
    stroke: 'rgba(249,115,22,0.12)',
    ctaHover: 'hover:text-orange-300',
  },
  blue: {
    dot: 'bg-blue-500',
    text: 'text-blue-400',
    num: 'text-blue-400',
    heading: 'text-blue-400',
    highlight: 'bg-blue-500',
    stroke: 'rgba(59,130,246,0.12)',
    ctaHover: 'hover:text-blue-300',
  },
};

// SVG decoratives per service (unique shapes)
const svgDecos = [
  // Software a medida — circuit/nodes
  `<svg data-service-draw class="absolute top-[8%] right-[4%] w-48 h-48 lg:w-72 lg:h-72 pointer-events-none z-0" viewBox="0 0 200 200" fill="none">
    <rect x="20" y="20" width="160" height="160" rx="8" stroke="rgba(168,85,247,0.25)" stroke-width="1.2" class="draw-path" />
    <rect x="50" y="50" width="100" height="100" rx="4" stroke="rgba(168,85,247,0.2)" stroke-width="1" class="draw-path" />
    <circle cx="100" cy="100" r="20" stroke="rgba(168,85,247,0.35)" stroke-width="1.5" class="draw-path" />
    <line x1="100" y1="20" x2="100" y2="80" stroke="rgba(168,85,247,0.18)" stroke-width="1" class="draw-path" />
    <line x1="100" y1="120" x2="100" y2="180" stroke="rgba(168,85,247,0.18)" stroke-width="1" class="draw-path" />
    <line x1="20" y1="100" x2="80" y2="100" stroke="rgba(168,85,247,0.18)" stroke-width="1" class="draw-path" />
    <line x1="120" y1="100" x2="180" y2="100" stroke="rgba(168,85,247,0.18)" stroke-width="1" class="draw-path" />
  </svg>`,
  // Sitios web — browser frame
  `<svg data-service-draw class="absolute bottom-[10%] right-[6%] w-36 h-36 lg:w-56 lg:h-56 pointer-events-none z-0 hidden md:block" viewBox="0 0 200 200" fill="none">
    <rect x="15" y="30" width="170" height="140" rx="6" stroke="rgba(34,197,94,0.25)" stroke-width="1.5" class="draw-path" />
    <line x1="15" y1="55" x2="185" y2="55" stroke="rgba(34,197,94,0.2)" stroke-width="1" class="draw-path" />
    <circle cx="35" cy="42" r="4" stroke="rgba(34,197,94,0.3)" stroke-width="1.5" class="draw-path" />
    <circle cx="50" cy="42" r="4" stroke="rgba(34,197,94,0.3)" stroke-width="1.5" class="draw-path" />
    <circle cx="65" cy="42" r="4" stroke="rgba(34,197,94,0.3)" stroke-width="1.5" class="draw-path" />
    <rect x="30" y="70" width="60" height="8" rx="2" stroke="rgba(34,197,94,0.18)" stroke-width="1" class="draw-path" />
    <rect x="30" y="90" width="140" height="4" rx="1" stroke="rgba(34,197,94,0.14)" stroke-width="1" class="draw-path" />
    <rect x="30" y="102" width="100" height="4" rx="1" stroke="rgba(34,197,94,0.14)" stroke-width="1" class="draw-path" />
  </svg>`,
  // E-commerce — shopping bag
  `<svg data-service-draw class="absolute top-[8%] right-[4%] w-48 h-48 lg:w-72 lg:h-72 pointer-events-none z-0" viewBox="0 0 200 200" fill="none">
    <path d="M50 70 L50 170 Q50 180 60 180 L140 180 Q150 180 150 170 L150 70" stroke="rgba(249,115,22,0.25)" stroke-width="1.5" class="draw-path" />
    <path d="M70 70 L70 50 Q70 25 100 25 Q130 25 130 50 L130 70" stroke="rgba(249,115,22,0.3)" stroke-width="1.5" class="draw-path" />
    <line x1="45" y1="70" x2="155" y2="70" stroke="rgba(249,115,22,0.2)" stroke-width="1" class="draw-path" />
    <circle cx="100" cy="120" r="15" stroke="rgba(249,115,22,0.22)" stroke-width="1.2" class="draw-path" />
  </svg>`,
  // Agentes de automatización — gear/loop
  `<svg data-service-draw class="absolute bottom-[10%] right-[6%] w-36 h-36 lg:w-56 lg:h-56 pointer-events-none z-0 hidden md:block" viewBox="0 0 200 200" fill="none">
    <circle cx="100" cy="100" r="80" stroke="rgba(59,130,246,0.2)" stroke-width="1.2" stroke-dasharray="6 4" class="draw-path" />
    <circle cx="100" cy="100" r="50" stroke="rgba(59,130,246,0.28)" stroke-width="1.5" class="draw-path" />
    <circle cx="100" cy="100" r="20" stroke="rgba(59,130,246,0.35)" stroke-width="1.8" class="draw-path" />
    <path d="M100 20 L108 35 L92 35 Z" stroke="rgba(59,130,246,0.25)" stroke-width="1.5" class="draw-path" />
    <path d="M180 100 L165 108 L165 92 Z" stroke="rgba(59,130,246,0.25)" stroke-width="1.5" class="draw-path" />
    <path d="M100 180 L92 165 L108 165 Z" stroke="rgba(59,130,246,0.25)" stroke-width="1.5" class="draw-path" />
    <path d="M20 100 L35 92 L35 108 Z" stroke="rgba(59,130,246,0.25)" stroke-width="1.5" class="draw-path" />
  </svg>`,
];
---

<Layout
    title="Servicios — edd n' dev"
    description="Software a medida, sitios web, e-commerce y agentes de automatización. Soluciones digitales construidas para resolver problemas reales."
>
    <!-- HERO -->
    <div id="hero" class="relative min-h-[100dvh] w-full flex flex-col justify-center lg:justify-end pt-32 pb-0 lg:pb-24 overflow-hidden border-b border-white/10" data-services-hero>
      <!-- Ledding Background -->
      <div id="ledding-services-container" class="absolute inset-0 z-0 opacity-40"></div>

      <!-- Gradient Orbs -->
      <div data-service-orb class="absolute top-[15%] right-[10%] w-[500px] h-[500px] rounded-full bg-purple-600/20 blur-[120px] pointer-events-none z-[1]"></div>
      <div data-service-orb class="absolute bottom-[10%] left-[5%] w-[400px] h-[400px] rounded-full bg-violet-500/15 blur-[100px] pointer-events-none z-[1]"></div>

      <!-- Vignette -->
      <div id="hero-vignette"
           class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-black/30 pointer-events-none z-10">
      </div>

      <!-- Grid Overlay -->
      <div class="absolute inset-0 z-[3] pointer-events-none opacity-[0.03]"
           style="background-image: linear-gradient(to right, white 1px, transparent 1px), linear-gradient(to bottom, white 1px, transparent 1px); background-size: 80px 80px;">
      </div>

      <!-- Content -->
      <div class="relative z-20 w-full px-6 sm:px-12 max-w-[1800px] mx-auto">
        <header class="flex flex-col items-start">
          <div class="flex items-center gap-3 mb-4 lg:mb-6 opacity-70">
            <div class="w-2 h-2 bg-purple-500 rounded-full animate-pulse shadow-[0_0_8px_#a855f7]"></div>
            <span class="font-mono text-sm sm:text-base md:text-lg lg:text-sm 2xl:text-base tracking-widest uppercase text-gray-300">eddndev studio // servicios</span>
          </div>

          <h1 class="font-black tracking-tighter text-white leading-[0.85] text-[clamp(2.5rem,10vw,12rem)] 2xl:text-[clamp(5rem,11vw,16rem)] mix-blend-screen">
            SERVICIOS <br>
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-purple-200">COMPLETOS.</span>
          </h1>

          <div class="mt-8 lg:mt-12 grid grid-cols-1 lg:grid-cols-12 gap-8 w-full border-t border-white/10 pt-8">
            <div class="lg:col-span-5">
              <p class="text-lg sm:text-xl md:text-2xl lg:text-xl 2xl:text-2xl text-gray-300 font-light leading-relaxed max-w-xl 2xl:max-w-2xl">
                Diseñamos, construimos y operamos soluciones digitales que
                <span class="text-white font-medium">trabajan para tu negocio</span>, no al revés.
              </p>
            </div>
          </div>
        </header>
      </div>
    </div>

    <!-- SERVICE DETAIL SECTIONS -->
    {services.map((service, index) => {
      const c = colorMap[service.color];
      const bgColor = index % 2 === 0 ? 'bg-black' : 'bg-[#050505]';
      const svgDeco = svgDecos[index];

      return (
        <section id={service.id} class={`${bgColor} text-white border-b border-white/10 relative overflow-hidden`}>

          <!-- SVG Decorative -->
          <Fragment set:html={svgDeco} />

          <!-- Floating SVG -->
          <svg data-service-float data-speed="0.8" class="absolute top-[20%] right-[12%] w-12 h-12 lg:w-20 lg:h-20 pointer-events-none z-0 opacity-20" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="1">
            <circle cx="50" cy="50" r="40" class={c.text} />
            <circle cx="50" cy="50" r="15" class={c.text} />
          </svg>

          <div class="mx-auto max-w-[1800px] px-6 sm:px-12 py-24 lg:py-32 relative z-10">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-20">

              <!-- Left Column -->
              <div class="lg:col-span-5">
                <div class={`text-xs 2xl:text-sm font-mono ${c.num} tracking-widest mb-6 reveal-text`}>
                  [ {service.number} · {service.title.toUpperCase()} ]
                </div>
                <h2 class="text-4xl sm:text-5xl md:text-6xl lg:text-6xl 2xl:text-7xl font-black tracking-tighter leading-[0.9] reveal-text">
                  <Fragment set:html={service.title.split(' ').length > 1
                    ? `${service.title.split(' ').slice(0, -1).join(' ')} <br> <span class="${c.heading}">${service.title.split(' ').slice(-1)[0].toUpperCase()}.</span>`
                    : `<span class="${c.heading}">${service.title.toUpperCase()}.</span>`
                  } />
                </h2>
              </div>

              <!-- Right Column -->
              <div class="lg:col-span-7 flex flex-col justify-center">
                <p class="text-gray-300 text-lg sm:text-xl lg:text-lg 2xl:text-xl font-light leading-relaxed max-w-3xl mb-10 reveal-text">
                  {service.description}
                </p>

                <!-- Highlights -->
                <ul class="space-y-4 mb-10">
                  {service.highlights.map((highlight) => (
                    <li class="flex items-start gap-3" data-service-highlight>
                      <span class={`w-1.5 h-1.5 ${c.highlight} rounded-full mt-2.5 flex-shrink-0`}></span>
                      <span class="text-gray-400 font-light 2xl:text-lg">{highlight}</span>
                    </li>
                  ))}
                </ul>

                <!-- CTA -->
                <div class="reveal-text flex flex-col sm:flex-row gap-6 items-start sm:items-center">
                  {service.id === 'agentes-de-automatizacion' ? (
                    <>
                      <a href="/automation" data-cursor-text="EXPLORAR" class="group relative px-8 py-4 bg-white text-black font-bold rounded-full overflow-hidden transition-transform hover:scale-105">
                          <span class="relative z-10 group-hover:text-blue-600 transition-colors">Ver cómo funciona</span>
                      </a>
                      <a href="/contact" class={`group flex items-center gap-2 text-white/70 font-medium 2xl:text-lg ${c.ctaHover} transition-colors`}>
                        <span>Solicitar cotización</span>
                        <svg class="w-4 h-4 2xl:w-5 2xl:h-5 transition-transform group-hover:translate-x-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
                      </a>
                    </>
                  ) : (
                    <a href="/contact" data-cursor-text="CONTACTO" class={`group flex items-center gap-2 text-white font-medium 2xl:text-lg ${c.ctaHover} transition-colors`}>
                      <span>Hablemos de este servicio</span>
                      <svg class="w-4 h-4 2xl:w-5 2xl:h-5 transition-transform group-hover:translate-x-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
                    </a>
                  )}
                </div>
              </div>

            </div>
          </div>
        </section>
      );
    })}

    <!-- CTA SECTION -->
    <section class="relative z-20 bg-[#6A0DAD] text-white overflow-hidden py-24 lg:py-32">
        <!-- Dot pattern background -->
        <div class="absolute inset-0 pointer-events-none opacity-[0.04] z-0"
             style="background-image: radial-gradient(circle, white 1px, transparent 1px); background-size: 40px 40px;">
        </div>

        <div class="relative mx-auto max-w-[1800px] px-6 sm:px-12 z-10">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
                <div class="lg:col-span-5 relative">
                    <div class="text-xs sm:text-sm md:text-base lg:text-xs font-mono text-purple-200 tracking-widest mb-6 reveal-text">
                        [ SIGUIENTE PASO ]
                    </div>
                    <h2 class="text-4xl sm:text-5xl md:text-6xl lg:text-6xl 2xl:text-7xl font-black tracking-tighter leading-[0.9] reveal-text">
                        ¿LISTO PARA <br>
                        <span class="text-purple-200">EMPEZAR?</span>
                    </h2>
                </div>

                <div class="lg:col-span-7 flex flex-col justify-end pl-0 lg:pl-12">
                    <p class="text-lg sm:text-xl md:text-2xl lg:text-xl 2xl:text-2xl text-purple-100 font-light leading-relaxed max-w-2xl mb-8 reveal-text">
                        Cuéntanos qué necesita tu negocio y te decimos honestamente
                        <span class="text-white font-medium">cómo podemos ayudarte</span> — o si no somos la opción correcta.
                    </p>
                    <div class="reveal-text">
                        <a href="/contact" class="group relative inline-flex items-center gap-3 px-8 py-4 2xl:px-10 2xl:py-5 bg-white text-[#6A0DAD] font-bold rounded-full overflow-hidden transition-transform hover:scale-105">
                            <span class="relative z-10 group-hover:text-purple-900 transition-colors 2xl:text-lg">Iniciar conversación</span>
                            <svg class="w-4 h-4 2xl:w-5 2xl:h-5 transition-transform group-hover:translate-x-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <Footer />
</Layout>
