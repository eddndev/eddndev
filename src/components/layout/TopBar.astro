---
import { Image } from 'astro:assets';
import logoImg from '../../assets/images/logo.png';

interface Props {
  project?: {
    title: string;
  };
}

const { project } = Astro.props;
---

<header 
    id="top-bar"
    class="fixed top-0 left-0 right-0 z-40 h-16 lg:h-20 2xl:h-24 flex items-center bg-black/40 backdrop-blur-xl border-b border-white/10 px-6 sm:px-12 transition-all duration-300"
>
    <div class="flex items-center gap-6 h-full w-full max-w-[1800px] mx-auto">
        
        <!-- Menu Trigger -->
        <button 
            id="sidebar-menu-btn"
            class="group flex flex-col justify-center items-center border-r border-white/10 h-full w-16 lg:w-20 2xl:w-24 hover:bg-white/5 transition-colors -ml-6 sm:-ml-12"
            aria-label="Menu"
        >
            <div class="relative w-6 h-6 flex flex-col justify-center items-center gap-1.5 overflow-hidden">
                 <span class="w-full h-[2px] bg-white transform transition-transform duration-300 group-hover:translate-x-1"></span>
                 <span class="w-full h-[2px] bg-white transform transition-transform duration-300 group-hover:-translate-x-1"></span>
            </div>
        </button>

        <!-- Contextual Logo -->
        <a href="/" class="flex items-center gap-3 group">
            <Image 
                src={logoImg} 
                alt="EDDN.DEV" 
                class="h-5 lg:h-6 w-auto object-contain opacity-60 group-hover:opacity-100 transition-opacity" 
            />
        </a>

        <div class="h-4 w-px bg-white/10 hidden sm:block"></div>

        <!-- Dynamic Context -->
        <div class="flex items-center flex-1">
            {project ? (
                <div class="flex items-center gap-3 animate-in fade-in slide-in-from-left-4 duration-500">
                    <span class="text-[9px] lg:text-[10px] font-mono text-purple-400 uppercase tracking-widest border border-purple-500/30 px-2 py-0.5 rounded bg-purple-500/10">CASE STUDY</span>
                    <span class="text-sm lg:text-base font-bold text-white tracking-tight">{project.title}</span>
                </div>
            ) : (
                <div class="flex items-center gap-3">
                     <span class="flex h-2 w-2 relative">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                     </span>
                     <span class="inline-block text-[10px] lg:text-xs font-mono text-gray-400 uppercase tracking-widest">
                        Disponible
                     </span>
                </div>
            )}
        </div>

        <div class="flex items-center gap-3 sm:gap-6">
            <a 
                href="https://wa.me/525619433938" 
                target="_blank" 
                class="px-3 py-1.5 sm:px-5 sm:py-2 bg-white text-black text-[9px] sm:text-[10px] lg:text-xs font-black uppercase tracking-widest rounded-full hover:bg-purple-500 hover:text-white transition-all duration-300 transform hover:scale-105"
            >
                Hablemos
            </a>
        </div>
    </div>
</header>