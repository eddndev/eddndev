---
import { Image } from 'astro:assets';
---

<aside class="fixed left-0 top-0 z-50 bg-black border-r border-white/10 flex flex-row lg:flex-col h-16 lg:h-screen w-full lg:w-20 2xl:w-24 shrink-0 transition-all duration-300">
    
    <!-- 1. Menu Trigger Box -->
    <button 
        id="sidebar-menu-btn"
        class="w-16 lg:w-full h-full lg:h-20 2xl:h-24 flex items-center justify-center border-r lg:border-r-0 lg:border-b border-white/10 hover:bg-white/5 transition-colors group relative z-50 bg-black"
        aria-label="Menu"
    >
        <div class="relative w-6 h-6 flex flex-col justify-center items-center gap-1.5 overflow-hidden">
             <span class="w-full h-[2px] bg-white transform transition-transform duration-300 group-hover:translate-x-1" id="menu-line-1"></span>
             <span class="w-full h-[2px] bg-white transform transition-transform duration-300 group-hover:-translate-x-1" id="menu-line-2"></span>
        </div>
    </button>

    <!-- 2. Scroll Indicator Track (Desktop Only) -->
    <div class="hidden lg:flex flex-1 flex-col items-center justify-center py-8 relative">
        <div class="w-[1px] h-3/4 bg-white/10 relative overflow-hidden">
            <div id="scroll-progress-bar" class="absolute top-0 left-0 w-full bg-[#8b5cf6] h-0 transition-all duration-100 ease-out shadow-[0_0_10px_#8b5cf6]"></div>
        </div>
        
        <div class="mt-8 text-[9px] font-mono text-white/20 uppercase tracking-[0.3em] [writing-mode:vertical-lr] rotate-180">
            Progress
        </div>
    </div>

</aside>

<script>
    const progressBar = document.getElementById('scroll-progress-bar');
    
    function updateScroll() {
        if (!progressBar) return;
        const scrollTop = window.scrollY || document.documentElement.scrollTop;
        const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrollPercent = (scrollTop / scrollHeight) * 100;
        progressBar.style.height = `${scrollPercent}%`;
    }

    window.addEventListener('scroll', updateScroll);
    document.addEventListener('astro:page-load', updateScroll);
</script>